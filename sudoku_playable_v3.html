<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Simple Sudoku Game</title>
  <style>
    :root{--cell-size:46px;--gap:3px;font-family:system-ui,Segoe UI,Roboto,Helvetica,Arial}
    body{display:flex;flex-direction:column;align-items:center;gap:12px;padding:18px;background:#f7f7fb;color:#111}
    h1{font-size:18px;margin:0}
    #board{display:grid;grid-template-columns:repeat(9, var(--cell-size));gap:var(--gap);background:#222;padding:6px;border-radius:8px}
    .cell{width:var(--cell-size);height:var(--cell-size);display:flex;align-items:center;justify-content:center;background:white;font-size:18px;border-radius:4px;border:1px solid #ddd;box-shadow:0 1px 0 rgba(0,0,0,0.03)}
    .cell.prefill{background:#eef2ff;font-weight:700;color:#111}
    .cell input{width:100%;height:100%;border:0;text-align:center;font-size:18px;background:transparent}
    .controls{display:flex;gap:8px;flex-wrap:wrap;justify-content:center}
    button{padding:8px 12px;border-radius:6px;border:0;background:#4b6cff;color:white;font-weight:600}
    #status{min-height:20px}
  </style>

  <!-- Google Analytics 4 -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=G-XXXXXXXXXX"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());
    gtag('config', 'G-WQ505L2965');
  </script>
</head>
<body>
  <h1>Simple Sudoku</h1>

  <div id="board"></div>

  <div class="controls">
    <button id="newGameBtn">New Game</button>
    <button id="hintBtn">Hint</button>
    <button id="checkBtn">Check</button>
    <button id="solveBtn">Solve</button>
  </div>

  <div id="status"></div>

  <script>
    /* ------------------ Simple puzzles (easy) ------------------ */
    const PUZZLES = [
      { id:1, puzzle: "530070000600195000098000060800060003400803001700020006060000280000419005000080079", solution: "534678912672195348198342567859761423426853791713924856961537284287419635345286179" },
      { id:2, puzzle: "200080300060070084030500209000105408000000000402706000301007040720040060004010003", solution: "247981356561273984938546219873195428195824637426736591381657942729348165654912873" }
    ];

    let state = {puzzleIdx:0, startTime:null, moves:0, solved:false};

    /* ------------------ Board rendering ------------------ */
    const boardEl = document.getElementById('board');

    function renderGrid(puzzleStr) {
      boardEl.innerHTML = '';
      for(let i=0;i<81;i++){
        const cell = document.createElement('div');
        cell.className = 'cell';
        const val = puzzleStr[i];
        const input = document.createElement('input');
        input.type='text'; input.maxLength=1;
        input.dataset.index = i;
        const r = Math.floor(i/9), c = i%9;
        if((c%3)===2) cell.style.marginRight='6px';
        if((r%3)===2) cell.style.marginBottom='6px';
        if(val!=='0'){
          input.value = val;
          input.disabled = true;
          cell.classList.add('prefill');
        }
        input.addEventListener('input', onCellInput);
        cell.appendChild(input);
        boardEl.appendChild(cell);
      }
    }

    function readGrid(){
      const inputs = boardEl.querySelectorAll('input');
      return Array.from(inputs).map(i=>i.value.trim() || '0').join('');
    }

    function setCellValue(idx, v){
      const input = boardEl.querySelector(`input[data-index='${idx}']`);
      if(input && !input.disabled){ input.value = v; }
    }

    /* ------------------ Basic interactions ------------------ */
    function onCellInput(e){
      const v = e.target.value.replace(/[^1-9]/g,'');
      e.target.value = v;
      state.moves++;
    }

    document.getElementById('newGameBtn').addEventListener('click', ()=>startNewGame());
    document.getElementById('checkBtn').addEventListener('click', ()=>checkSolution(false));
    document.getElementById('solveBtn').addEventListener('click', ()=>checkSolution(true));
    document.getElementById('hintBtn').addEventListener('click', ()=>giveHint());

    /* ------------------ Game lifecycle ------------------ */
    function startNewGame(){
      state.puzzleIdx = (state.puzzleIdx + 1) % PUZZLES.length;
      const p = PUZZLES[state.puzzleIdx];
      renderGrid(p.puzzle);
      state.startTime = Date.now(); state.moves = 0; state.solved=false;
      setStatus('New game — good luck!');
      gtag('event', 'game_start', { puzzle_id: p.id });
    }

    function checkSolution(reveal=false){
      const current = readGrid();
      const sol = PUZZLES[state.puzzleIdx].solution;
      if(current === sol){
        state.solved = true;
        const timeSec = Math.round((Date.now()-state.startTime)/1000);
        setStatus('Solved! Time: '+timeSec+'s | moves: '+state.moves);
        gtag('event', 'game_end', { puzzle_id: PUZZLES[state.puzzleIdx].id, time_sec: timeSec, moves: state.moves });
      } else if(reveal){
        for(let i=0;i<81;i++) setCellValue(i, sol[i]);
        setStatus('Solution revealed');
        gtag('event', 'solve_revealed', { puzzle_id: PUZZLES[state.puzzleIdx].id });
      } else {
        setStatus('Not solved yet — keep trying');
      }
    }

    function setStatus(msg){ document.getElementById('status').textContent = msg; }

    /* ------------------ Hint ------------------ */
    function giveHint(){
      const sol = PUZZLES[state.puzzleIdx].solution;
      const current = readGrid();
      const emptyIdx = [];
      for(let i=0;i<81;i++) if(current[i]==='0') emptyIdx.push(i);
      if(emptyIdx.length===0){ setStatus('No empty cells for hint'); return; }
      const idx = emptyIdx[Math.floor(Math.random()*emptyIdx.length)];
      setCellValue(idx, sol[idx]);
      setStatus('Hint given');
      gtag('event', 'hint_used', { puzzle_id: PUZZLES[state.puzzleIdx].id, cell_index: idx });
    }

    /* ------------------ Init ------------------ */
    startNewGame();
  </script>
</body>
</html>
